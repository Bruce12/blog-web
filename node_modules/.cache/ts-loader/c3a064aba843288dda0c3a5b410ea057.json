{"remainingRequest":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/babel-loader/lib/index.js!/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/ts-loader/index.js??ref--14-2!/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lanjianhua/Desktop/lanjianhua/myMusic/src/components/Popup/components/Popup.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/src/components/Popup/components/Popup.vue","mtime":1575252846557},{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport _classCallCheck from \"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lanjianhua/Desktop/lanjianhua/myMusic/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator';\nimport { getPosition, getStyle, animate } from '@/utils/dom'; // import api from '../api'\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(default_1, _Vue);\n\n  // import api from '../api'\n  function default_1() {\n    var _this;\n\n    _classCallCheck(this, default_1);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(default_1).apply(this, arguments));\n    _this.left = 0;\n    _this.top = 0;\n    _this.shellWidth = 0;\n    _this.shellHeight = 0;\n    _this.shellTop = 0;\n    _this.shellLeft = 0;\n    _this.defaultOptions = ['phone', 'truck', 'user', 'wechat', 'archive', 'buyer', 'seller'];\n    _this.endTimer = null;\n    _this.target = '';\n    _this.preventClick = true;\n    _this.startTimer = null;\n    _this.config = {\n      phone: {\n        icon: 'icon-phone',\n        text: '打电话'\n      },\n      user: {\n        icon: 'icon-user',\n        text: '用户详细信息'\n      },\n      archive: {\n        icon: 'icon-archive',\n        text: '线索认领'\n      },\n      buyer: {\n        icon: 'icon-buyer',\n        text: '买家详情'\n      },\n      wechat: {\n        icon: 'icon-wechat',\n        text: '微信'\n      },\n      truck: {\n        icon: 'icon-truck',\n        text: '物流'\n      },\n      yen: {\n        icon: 'icon-yen',\n        text: '线索交易订单'\n      },\n      seller: {\n        icon: 'icon-seller',\n        text: '卖家详情'\n      },\n      email: {\n        icon: 'icon-email',\n        text: '邮箱'\n      }\n    };\n    return _this;\n  }\n\n  _createClass(default_1, [{\n    key: \"onRoute\",\n    value: function onRoute(val) {\n      this.mouseleave();\n    }\n  }, {\n    key: \"onPositionChange\",\n    value: function onPositionChange(val) {\n      if (val) this.$emit('update:position', val);\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.target = _this2.$refs.myPopup;\n        document.body.appendChild(_this2.$refs.myPopupBox);\n      });\n    }\n  }, {\n    key: \"created\",\n    value: function created() {\n      this.init();\n      this.singleton();\n    }\n  }, {\n    key: \"destroyed\",\n    value: function destroyed() {\n      if (this.show) {\n        this.$emit('update:show', false);\n      }\n    } //\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      var overwriteConf = this.overwriteConf;\n\n      if (!overwriteConf || !overwriteConf.length) {\n        this.options.forEach(function (item, inx) {\n          if (!_this3.defaultOptions.includes(item)) {\n            _this3.defaultOptions.push(item);\n          }\n        });\n      } else {\n        this.defaultOptions = this.overwriteConf;\n      }\n    }\n  }, {\n    key: \"mouseleave\",\n    value: function mouseleave() {\n      var _this4 = this;\n\n      clearTimeout(this.startTimer);\n      setTimeout(function () {\n        _this4.$emit('update:show', false);\n\n        _this4.preventClick = true;\n      }, 500);\n    }\n  }, {\n    key: \"handleAction\",\n    value: function handleAction(evName) {\n      if (!evName || this.preventClick) {\n        return null;\n      }\n\n      var data = this.data;\n      var baseUrl = location.href.replace(location.hash, '');\n\n      switch (evName) {\n        case 'wechat':\n          if (!data.id) return null;\n          this.$router.push({\n            name: 'relationship',\n            query: {\n              userId1: data.id\n            }\n          });\n          break;\n        // 认领\n\n        case 'archive':\n          if (!data.id) return null; // api.saveTags([data.id])\n          //   .then((res: any) => {\n          //     this.$message({\n          //       message: res.success ? '认领线索成功' : res.message,\n          //       type: res.success ? 'success' : 'error'\n          //     })\n          //   })\n\n          break;\n\n        case 'user':\n          if (!data.id) return null; // this.$router.push({ name: 'uc', query: { id: data.id } })\n\n          window.open(\"\".concat(baseUrl, \"#/uc?id=\").concat(data.id), '_blank');\n          break;\n\n        case 'buyer':\n          if (!data.id) return null; // this.$router.push({ name: 'buyerInfo', query: { cId: data.id } })\n\n          window.open(\"\".concat(baseUrl, \"#/buyerInfo?cId=\").concat(data.id), '_blank');\n          break;\n\n        case 'truck':\n          if (!data.id) return null; // this.$router.push({ name: 'supplyManage', query: { id: data.id1 } })\n\n          window.open(\"\".concat(baseUrl, \"#/supply/manage?id=\").concat(data.id), '_blank');\n          break;\n\n        case 'phone':\n          // 拨打电话\n          if (!this.isShowTelephone) this.$emit('update:isShowTelephone', true);\n          break;\n\n        case 'yen':\n          if (!data.id) return null; // this.$router.push({ name: 'tradeManage', query: { id: data.id } })\n\n          window.open(\"\".concat(baseUrl, \"#/trade/orderlist?id=\").concat(data.id));\n          break;\n\n        case 'seller':\n          if (!data.id) return null; // this.$router.push({ name: 'seller_info', query: { cId: data.id } })\n\n          window.open(\"\".concat(baseUrl, \"#/seller_info?cId=\").concat(data.id));\n          break;\n      }\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(el, position) {\n      var _this5 = this;\n\n      var resDom = {\n        x: 0,\n        y: 0\n      };\n\n      if (position === 'fixed') {\n        resDom.x = el.getBoundingClientRect().left;\n        resDom.y = el.getBoundingClientRect().top;\n      } else {\n        resDom = getPosition(el);\n      } // 查找父亲元素的 position\n\n\n      this.top = 20;\n      this.shellWidth = getStyle(el, 'width');\n      this.shellHeight = getStyle(el, 'height');\n      this.shellTop = resDom.y;\n      this.shellLeft = resDom.x;\n      this.$el.style.display = 'block';\n      this.startTimer = setTimeout(function () {\n        animate(_this5.target, {\n          opacity: 1,\n          top: _this5.top - 50\n        }, function () {\n          _this5.preventClick = false;\n        });\n      }, 900);\n    } // 单例模式\n\n  }, {\n    key: \"singleton\",\n    value: function singleton() {\n      var _this6 = this;\n\n      this.$root.$emit('oncePopup', this);\n\n      var oncePopup = function oncePopup(page) {\n        _this6.$root.$off('oncePopup', oncePopup);\n\n        if (page !== _this6) {\n          _this6.$emit('update:show', false);\n        }\n      };\n\n      this.$root.$on('oncePopup', oncePopup);\n    }\n  }]);\n\n  return default_1;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  default: []\n})], default_1.prototype, \"options\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], default_1.prototype, \"data\", void 0);\n\ntslib_1.__decorate([Prop()], default_1.prototype, \"overwriteConf\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: 'absolute'\n})], default_1.prototype, \"position\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: true,\n  type: Boolean\n})], default_1.prototype, \"show\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: false,\n  type: Boolean\n})], default_1.prototype, \"isShowTelephone\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: 9999\n})], default_1.prototype, \"zIndex\", void 0);\n\ntslib_1.__decorate([Watch('$route')], default_1.prototype, \"onRoute\", null);\n\ntslib_1.__decorate([Watch('position')], default_1.prototype, \"onPositionChange\", null);\n\ndefault_1 = tslib_1.__decorate([Component({\n  name: 'PopupUserBox',\n  components: {}\n})], default_1);\nexport default default_1;",null]}